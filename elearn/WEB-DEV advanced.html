<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Web Development — Advanced • E-Learn</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
<style>
:root{
  --green:#28b485; --green-dark:#1e8f66; --accent:#1565c0; --muted:#6b7280; --bg:#f5f7fa; --card:#fff;
}
*{box-sizing:border-box}
body{margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:var(--bg);color:#111}
header{background:linear-gradient(90deg,var(--green),#2dbd98);color:#fff;padding:16px 20px;display:flex;justify-content:space-between;align-items:center}
header h1{margin:0;font-size:20px}
nav a{color:#fff;text-decoration:none;margin-left:12px;font-weight:600}
nav a:hover{text-decoration:underline}
.container{max-width:1100px;margin:28px auto;padding:0 18px}
.grid{display:grid;grid-template-columns:1fr 360px;gap:22px}
@media(max-width:900px){.grid{grid-template-columns:1fr}}
.card{background:var(--card);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(16,24,40,0.06);transition:transform .15s}
.card:hover{transform:translateY(-4px)}
h2{font-size:20px;margin-top:0;color:var(--accent);padding-left:10px;border-left:5px solid var(--green)}
.video-wrap{margin-top:12px}
iframe{width:100%;height:360px;border-radius:8px;border:0}
@media(max-width:560px){iframe{height:220px}}
/* quiz */
.question{margin-bottom:14px;padding:12px;border-radius:8px;background:#fff;border:1px solid #eef2f7}
.question p{margin:0 0 8px 0;font-weight:600}
label{display:block;cursor:pointer;padding:6px;border-radius:6px}
input[type=radio]{margin-right:8px}
.btn{background:var(--green);color:#fff;padding:10px 16px;border-radius:8px;border:0;cursor:pointer;font-weight:700;margin-top:14px}
.btn:hover{background:var(--green-dark)}
.meta{font-size:13px;color:var(--muted)}
/* sidebar */
.pill{padding:5px 10px;border-radius:999px;background:rgba(40,180,133,0.14);color:var(--green-dark);font-weight:700;font-size:13px}
.progress{height:10px;background:#e7edf0;border-radius:999px;overflow:hidden;margin-top:12px}
.progress > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--green),#2dbd98);transition:width .6s ease}
/* progress dial */
.progress-dial{width:120px;height:120px;position:relative;display:inline-block;margin:8px;cursor:pointer}
.progress-dial svg{width:120px;height:120px;transform:rotate(-90deg)}
.progress-dial circle{fill:none;stroke-width:10;stroke-linecap:round}
.progress-bg{stroke:#e6e6e6}
.progress-value{stroke:url(#g);transition:stroke-dashoffset .7s ease}
.progress-text{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);font-family:Inter;font-weight:700;color:var(--accent)}
.progress-label{text-align:center;font-weight:600;margin-top:6px;color:#333;font-size:14px}
.locked{display:none;background:#fff3f3;border:1px solid #ffd6d6;padding:10px;border-radius:8px;color:#9b2b2b;margin-top:12px}
.footer{max-width:1100px;margin:28px auto 60px;padding:0 18px;color:var(--muted);font-size:13px}
</style>
</head>
<body>

<header>
  <h1>E-Learn — Web Dev Advanced</h1>
  <nav>
    <a href="index.html">Home</a>
    <a href="WEB-DEV beginner.html">Beginner</a>
    <a href="WEB-DEV intermediate.html">Intermediate</a>
    <a href="WEB-DEV advanced.html">Advanced</a>
    <a href="dashboard.html">Dashboard</a>
  </nav>
</header>

<main class="container">
  <div class="grid">
    <!-- left -->
    <div>
      <div class="card">
        <h2>Advanced Web Development</h2>
        <p class="meta">Master React, API integration, performance optimization, and advanced CSS techniques.</p>

        <h3 style="margin-top:12px">Lesson Video</h3>
        <div class="video-wrap card" style="padding:12px">
          <iframe src="https://www.youtube.com/embed/Ke90Tje7VS0" title="React Tutorial"></iframe>
        </div>

        <h3 style="margin-top:16px">Advanced Topics</h3>
        <ul>
          <li>React Hooks & State Management</li>
          <li>API Integration & Axios/Fetch</li>
          <li>Performance & Code Splitting</li>
        </ul>
      </div>

      <!-- quiz card -->
      <div class="card" style="margin-top:18px">
        <h2>Advanced Quiz (5 Questions)</h2>

        <form id="quizForm">
          <div class="question"><p>1. Which library is commonly used for building modern web interfaces?</p>
            <label><input type="radio" name="q1" value="A"> Angular</label>
            <label><input type="radio" name="q1" value="B"> Vue</label>
            <label><input type="radio" name="q1" value="C"> React</label>
          </div>

          <div class="question"><p>2. Which React hook is used for state management in functional components?</p>
            <label><input type="radio" name="q2" value="A"> useState</label>
            <label><input type="radio" name="q2" value="B"> useEffect</label>
            <label><input type="radio" name="q2" value="C"> useContext</label>
          </div>

          <div class="question"><p>3. Which method is used to fetch data from an API in JavaScript?</p>
            <label><input type="radio" name="q3" value="A"> fetch()</label>
            <label><input type="radio" name="q3" value="B"> getData()</label>
            <label><input type="radio" name="q3" value="C"> axiosData()</label>
          </div>

          <div class="question"><p>4. Which HTML tag is used to embed JavaScript code?</p>
            <label><input type="radio" name="q4" value="A"> &lt;js&gt;</label>
            <label><input type="radio" name="q4" value="B"> &lt;script&gt;</label>
            <label><input type="radio" name="q4" value="C"> &lt;javascript&gt;</label>
          </div>

          <div class="question"><p>5. Which CSS technique helps make websites responsive?</p>
            <label><input type="radio" name="q5" value="A"> width</label>
            <label><input type="radio" name="q5" value="B"> @media queries</label>
            <label><input type="radio" name="q5" value="C"> display</label>
          </div>

          <button type="button" class="btn" id="submitBtn">Submit Quiz</button>
        </form>

        <div style="margin-top:12px">
          <div class="meta">Passing score: 70%</div>
        </div>
      </div>
    </div>

    <!-- sidebar -->
    <aside>
      <div class="card">
        <h3>Your Progress</h3>
        <div style="display:flex;align-items:center;gap:12px">
          <b id="statusPercent">0%</b>
          <span class="meta">completed</span>
        </div>
        <div class="progress"><i id="sidebarPB"></i></div>

        <hr style="margin:12px 0;border:none;border-top:1px solid #f0f4f6">

        <h4>Course Levels</h4>
        <div style="display:flex;flex-wrap:wrap;justify-content:center;margin-top:8px">
          <!-- Beginner dial -->
          <div style="text-align:center;margin:8px">
            <div class="progress-dial" id="dial_webdev_beginner" title="Beginner — Click to open">
              <svg>
                <defs><linearGradient id="g"><stop offset="0%" stop-color="#28b485"/><stop offset="100%" stop-color="#1e8f66"/></linearGradient></defs>
                <circle class="progress-bg" cx="60" cy="60" r="48"></circle>
                <circle class="progress-value" cx="60" cy="60" r="48"></circle>
              </svg>
              <div class="progress-text" id="text_webdev_beginner">0%</div>
            </div>
            <div class="progress-label">Beginner</div>
          </div>

          <!-- Intermediate dial -->
          <div style="text-align:center;margin:8px">
            <div class="progress-dial" id="dial_webdev_intermediate" title="Intermediate">
              <svg><circle class="progress-bg" cx="60" cy="60" r="48"></circle><circle class="progress-value" cx="60" cy="60" r="48"></circle></svg>
              <div class="progress-text" id="text_webdev_intermediate">0%</div>
            </div>
            <div class="progress-label">Intermediate</div>
          </div>

          <!-- Advanced dial -->
          <div style="text-align:center;margin:8px">
            <div class="progress-dial" id="dial_webdev_advanced" title="Advanced">
              <svg><circle class="progress-bg" cx="60" cy="60" r="48"></circle><circle class="progress-value" cx="60" cy="60" r="48"></circle></svg>
              <div class="progress-text" id="text_webdev_advanced">0%</div>
            </div>
            <div class="progress-label">Advanced</div>
          </div>
        </div>

        <div class="locked" id="lockedNote">
          <strong>Note:</strong> Intermediate must be completed (≥70%) to unlock Advanced.
        </div>

        <div style="margin-top:12px">
          <h4>Level</h4>
          <span class="pill">Advanced</span>
          <p class="meta" style="margin-top:8px">Complete the quiz with ≥70% to save progress and earn a certificate.</p>
        </div>
      </div>
    </aside>
  </div>
</main>

<div class="footer">© 2025 E-Learn • Learn Better. Learn Smarter.</div>

<script>
/* ---------- Utility: read various legacy keys for compatibility ---------- */
function readProgress(user, coursePrefix, level){
  const preferred = `${user}_${coursePrefix}_${level}`;
  let val = localStorage.getItem(preferred);
  if(val !== null) return parseInt(val,10) || 0;

  const alt1 = `${user}-${coursePrefix}-${level}-progress`;
  val = localStorage.getItem(alt1);
  if(val !== null) return parseInt(val,10) || 0;

  const alt2 = `${user}_${coursePrefix}_progress`;
  val = localStorage.getItem(alt2);
  if(val !== null) return parseInt(val,10) || 0;

  return 0;
}

/* ---------- Dial creation function (reusable) ---------- */
function attachDial(dialId, textId, initialPercent){
  const dial = document.querySelector(`#${dialId} .progress-value`);
  const text = document.getElementById(textId);
  const r = 48;
  const c = 2 * Math.PI * r;
  dial.style.strokeDasharray = c;
  dial.style.strokeDashoffset = c;
  function set(p){
    const offset = c - (p/100) * c;
    dial.style.strokeDashoffset = offset;
    text.textContent = p + "%";
  }
  setTimeout(()=> set(initialPercent), 250);
}

/* ---------- Load saved progress and initialize dials ---------- */
const user = localStorage.getItem("loggedInUser") || "guest";
const course = "webdev";

const beginnerPct = readProgress(user, course, "beginner");
const intermediatePct = readProgress(user, course, "intermediate");
const advancedPct = readProgress(user, course, "advanced");

function courseTotal(b,i,a){
  const sum = (b||0) + (i||0) + (a||0);
  const avg = Math.round(sum / 3);
  return avg;
}
const totalPct = courseTotal(beginnerPct, intermediatePct, advancedPct);

document.getElementById("statusPercent").textContent = totalPct + "%";
document.getElementById("sidebarPB").style.width = totalPct + "%";

attachDial("dial_webdev_beginner","text_webdev_beginner", beginnerPct);
attachDial("dial_webdev_intermediate","text_webdev_intermediate", intermediatePct);
attachDial("dial_webdev_advanced","text_webdev_advanced", advancedPct);

/* ---------- Click behavior ---------- */
document.getElementById("dial_webdev_beginner").addEventListener("click", ()=> window.location.href = "WEB-DEV beginner.html");
document.getElementById("dial_webdev_intermediate").addEventListener("click", ()=> window.location.href = "WEB-DEV intermediate.html");
document.getElementById("dial_webdev_advanced").addEventListener("click", ()=> window.location.href = "WEB-DEV advanced.html");

/* ---------- Lock: Advanced requires Intermediate >= 70 ---------- */
if(intermediatePct < 70){
  document.getElementById("lockedNote").style.display = "block";
}

/* ---------- Quiz handling ---------- */
const answers = { q1:'C', q2:'A', q3:'A', q4:'B', q5:'B' };
document.getElementById("submitBtn").addEventListener("click", ()=> {
  // if intermediate not completed, block saving and show message
  if(intermediatePct < 70){
    alert("You must complete the Intermediate level (≥70%) before saving Advanced progress.");
    return;
  }

  let score = 0;
  for(let q in answers){
    const sel = document.querySelector(`input[name=${q}]:checked`);
    if(sel && sel.value === answers[q]) score++;
  }
  const percent = Math.round((score / 5) * 100);
  alert(`You scored ${percent}% (${score}/5)`);

  if(percent >= 70){
    const preferredKey = `${user}_webdev_advanced`;
    localStorage.setItem(preferredKey, percent);
    localStorage.setItem(`${user}-webdev-advanced-progress`, percent);

    // award certificate
    if(user && user !== "guest"){
      let earned = JSON.parse(localStorage.getItem("earnedCerts") || "[]");
      const certName = "Web Development - Advanced";
      if(!earned.includes(certName)){
        earned.push(certName);
        localStorage.setItem("earnedCerts", JSON.stringify(earned));
      }
      alert("Advanced Level Completed ✅ Certificate added to Dashboard!");
    } else {
      alert("Advanced Completed — sign in to save certificate to dashboard.");
    }

    // update UI
    attachDial("dial_webdev_advanced","text_webdev_advanced", percent);
    document.getElementById("sidebarPB").style.width = courseTotal(beginnerPct, intermediatePct, percent) + "%";
    document.getElementById("statusPercent").textContent = courseTotal(beginnerPct, intermediatePct, percent) + "%";
  } else {
    alert("You need 70% or more to pass. Try again!");
  }
});
</script>

</body>
</html>
