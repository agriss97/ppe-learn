<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DevOps — Advanced</title>
<style>
  :root{--green:#28b485;--bg:#f5f7fa;--card:#fff;--accent:#1565c0;--muted:#6b7280}
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter,system-ui,-apple-system,Segoe UI,Roboto,Arial;background:var(--bg);color:#111}
  header{background:linear-gradient(90deg,var(--green),#2dbd98);color:#fff;padding:16px 20px;display:flex;justify-content:space-between;align-items:center}
  header h1{margin:0;font-size:20px}
  nav a{color:#fff;text-decoration:none;margin-left:10px;font-weight:600}
  .container{max-width:1100px;margin:26px auto;padding:0 18px}
  .hero{display:flex;gap:20px;align-items:center}
  .hero .card{flex:1;padding:18px;border-radius:12px;background:var(--card);box-shadow:0 6px 18px rgba(16,24,40,0.06)}
  .badge{display:inline-block;background:rgba(21,101,192,0.08);color:var(--accent);padding:6px 10px;border-radius:999px;font-weight:700}
  .row{display:grid;grid-template-columns:1fr 380px;gap:18px;margin-top:18px}
  @media(max-width:920px){.row{grid-template-columns:1fr}}
  iframe{width:100%;height:360px;border-radius:8px;border:0}
  .card{background:var(--card);border-radius:12px;padding:16px;box-shadow:0 6px 18px rgba(16,24,40,0.06)}
  .topic{background:#f0f9ff;padding:8px;border-radius:8px;display:inline-block;margin:6px 6px 6px 0;color:#084; font-weight:600}
  .quiz-list{margin-top:12px}
  .question{margin-bottom:12px;padding:12px;border-radius:8px;background:linear-gradient(180deg,#fff,#fbfcfd);border:1px solid #eef2f7}
  label{display:block;padding:6px;border-radius:6px;margin:4px 0;cursor:pointer}
  .controls{display:flex;gap:10px;align-items:center;margin-top:10px}
  .btn{background:var(--green);color:#fff;padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:700}
  .small{font-size:13px;color:var(--muted)}
  footer{max-width:1100px;margin:26px auto 60px;padding:0 18px;color:var(--muted);font-size:13px}
</style>
</head>
<body>

<header>
  <h1>E-Learn — DevOps Advanced</h1>
  <nav>
    <a href="DEVOPS index.html">Home</a>
    <a href="intermediate.html">Intermediate</a>
    <a href="beginner.html">Beginner</a>
  </nav>
</header>

<main class="container">
  <div class="hero">
    <div class="card">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <div class="badge">Advanced</div>
          <h2 style="margin:8px 0 6px 0">Advanced DevOps — Production Patterns</h2>
          <div class="small">Deep dive into Kubernetes patterns, GitOps, SRE topics, and scale</div>
        </div>
        <div style="text-align:right">
          <div class="small">Estimated time</div>
          <div style="font-weight:700">10+ hours</div>
        </div>
      </div>

      <h3 style="margin-top:12px">Learning outcomes</h3>
      <ul>
        <li>Design production-ready Kubernetes architectures</li>
        <li>Implement GitOps using Flux/ArgoCD</li>
        <li>Reliability at scale: SLOs & error budgets</li>
        <li>Advanced IaC patterns & module design</li>
        <li>Security at scale: scanning, policy and runtime protection</li>
      </ul>

      <h3>Intro Video</h3>
      <div style="margin:10px 0">
        <iframe src="https://www.youtube.com/embed/Xrgk023l4lI" title="DevOps Advanced"></iframe>
      </div>

    </div>
  </div>

  <div class="row" style="margin-top:18px">
    <div class="card">
      <h3>Advanced Quiz (25 Questions)</h3>
      <p class="small">Most questions cover production patterns — pass = 70%</p>

      <div id="advQuiz" class="quiz-list"></div>

      <div class="controls">
        <button class="btn" id="advSubmit">Submit Quiz</button>
        <button class="btn" id="advReset" style="background:#fff;color:var(--green);border:1px solid rgba(40,180,133,0.14)">Reset</button>
      </div>

      <div style="margin-top:12px" id="advResult" class="small"></div>
    </div>

    <aside style="display:flex;flex-direction:column;gap:12px">
      <div class="card">
        <h4>Prerequisites</h4>
        <ul>
          <li>Intermediate DevOps knowledge</li>
          <li>Comfort with Kubernetes & Terraform</li>
          <li>CI/CD experience</li>
        </ul>
        <div class="small" style="margin-top:8px">Tip: Pass the Intermediate quiz or set localStorage "loggedInUser" with saved progress ≥70%</div>
      </div>

      <div class="card">
        <h4>Pro tip</h4>
        <p class="small">Use GitOps for safe, auditable deployments. Git is the single source of truth for infra & app manifests.</p>
      </div>
    </aside>
  </div>
</main>

<footer>© E-Learn • DevOps Advanced</footer>

<script>
/* Advanced quiz items */
const advData = [
  {q:"1. GitOps primary concept is:", choices:["Push-based deploys","Config in Git is source-of-truth","Manual infra edits","Store secrets in Git"], answer:"B"},
  {q:"2. ArgoCD/Flux are used for:", choices:["CI runners","GitOps CD","Load balancers","Monitoring only"], answer:"B"},
  {q:"3. SLO stands for:", choices:["Service Level Objective","Service Level Operation","System Load Output","Security Level Objective"], answer:"A"},
  {q:"4. Error budget helps teams:", choices:["Ignore failures","Balance feature vs reliability","Increase downtime","Remove monitoring"], answer:"B"},
  {q:"5. Which is a pod autoscaling metric?", choices:["Memory/CPU usage","Number of branches","Commit count","DNS entries"], answer:"A"},
  {q:"6. Admission controllers in Kubernetes:", choices:["Validate/modify objects on create","Run containers","Store logs","Manage network"], answer:"A"},
  {q:"7. Policy-as-code example:", choices:["OPA (Gatekeeper)","Jenkinsfile","Dockerfile","Makefile"], answer:"A"},
  {q:"8. Blue/Green in production helps to:", choices:["Test on production subset","Provide zero-downtime switch","Backup database","Scale storage"], answer:"B"},
  {q:"9. Which is for vulnerability scanning of images?", choices:["Clair/Trivy","Selenium","Prometheus","Grafana"], answer:"A"},
  {q:"10. TLS termination typically happens at:", choices:["Load balancer / Ingress","App pod only","DNS server","CI runner"], answer:"A"},
  {q:"11. Which storage for k8s etcd requires care for:", choices:["Consistency & backups","Fast UI","CI speed","Secret rotation only"], answer:"A"},
  {q:"12. Sidecar pattern is used to:", choices:["Attach additional responsibilities to a pod","Create new clusters","Store logs externally","Manage git hooks"], answer:"A"},
  {q:"13. Chaos engineering main goal:", choices:["Hardening reliability via experiments","Faster builds","Better UI","Reduce infra"], answer:"A"},
  {q:"14. 'Immutable containers' means:", choices:["Rebuild rather than patch","Live patch containers","Debug in place","Use same container forever"], answer:"A"},
  {q:"15. Which is example of runtime protection?", choices:["Falco/Runtime security","Terraform","Helm","Prometheus"], answer:"A"},
  {q:"16. Observability pillars are:", choices:["Logs, metrics, traces","Images, containers, pods","CI, CD, CD","Repos, branches, tags"], answer:"A"},
  {q:"17. Which approach stores secrets securely off-cluster?", choices:["Vault/Secret Manager","Plain YAML","Git commits","ConfigMaps"], answer:"A"},
  {q:"18. When scaling stateful apps, important concern is:", choices:["Data consistency","Small image size","Number of branches","Linter errors"], answer:"A"},
  {q:"19. Canary analysis compares:", choices:["Metrics between canary and baseline","Different code styles","Only logs","Commit messages"], answer:"A"},
  {q:"20. What does 'pod disruption budget' control?", choices:["Allowed voluntary disruptions","Pod memory","CI concurrency","Network throughput"], answer:"A"},
  {q:"21. What is a mutating webhook?", choices:["It can modify incoming k8s objects","A network proxy","A CI job","A Helm plugin"], answer:"A"},
  {q:"22. Which is NOT a core SRE concept?", choices:["Error budgets","Runbooks","Unmonitored production","Service Level Indicators"], answer:"C"},
  {q:"23. Which pattern helps with DB migrations in k8s?", choices:["Job/CronJob pattern","Ingress rule","Service mesh","NodePort"], answer:"A"},
  {q:"24. Which is a common GitOps danger?", choices:["Manual cluster edits out-of-band","Fast CI","Better monitoring","Auto-scaling"], answer:"A"},
  {q:"25. Which practice speeds up cluster bootstrapping?", choices:["Use declarative manifests & bootstrap scripts","Manual setup","Ad-hoc CLI runs","No automation"], answer:"A"}
];

const advQuiz = document.getElementById('advQuiz');
const advSubmit = document.getElementById('advSubmit');
const advReset = document.getElementById('advReset');
const advResult = document.getElementById('advResult');

function buildAdv(){
  advQuiz.innerHTML='';
  advData.forEach((it,i)=>{
    const id='aq'+(i+1);
    const div=document.createElement('div'); div.className='question';
    const p=document.createElement('p'); p.textContent = `${i+1}. ${it.q.replace(/^\d+\.\s*/,'')}`;
    div.appendChild(p);
    it.choices.forEach((c,ci)=>{
      const val=String.fromCharCode(65+ci);
      const label=document.createElement('label');
      label.innerHTML = `<input type="radio" name="${id}" value="${val}"> ${c}`;
      div.appendChild(label);
    });
    advQuiz.appendChild(div);
  });
}
buildAdv();

advSubmit.addEventListener('click', ()=>{
  // check intermediate passed
  const user = localStorage.getItem('loggedInUser');
  const interKey = user ? `${user}_devops_intermediate_progress` : null;
  const interPct = interKey ? parseInt(localStorage.getItem(interKey) || '0',10) : 0;
  if(interPct < 70){
    alert('You must pass the Intermediate quiz (≥70%) before attempting Advanced.');
    return;
  }

  let score=0;
  advData.forEach((it,i)=>{
    const name='aq'+(i+1);
    const sel = document.querySelector(`input[name=${name}]:checked`);
    if(sel && sel.value === it.answer) score++;
  });
  const percent = Math.round((score/advData.length)*100);
  advResult.textContent = `You scored ${percent}% (${score}/${advData.length}).`;
  if(user){
    const key = `${user}_devops_advanced_progress`;
    localStorage.setItem(key, percent);
  }
  if(percent >= 70) alert('Awesome — you passed Advanced!');
  else alert('You need 70% to pass. Study the materials and try again.');
});

advReset.addEventListener('click', ()=>{
  document.querySelectorAll('#advQuiz input[type="radio"]').forEach(i=>i.checked=false);
});
</script>

</body>
</html>
