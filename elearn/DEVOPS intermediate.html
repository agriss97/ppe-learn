<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>DevOps — Intermediate</title>
<style>
  :root{
    --green:#28b485; --green-dark:#1e8f66; --muted:#6b7280; --card:#ffffff;
    --bg:#f5f7fa; --accent:#1565c0;
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; background:var(--bg); color:#111;}
  header{background:linear-gradient(90deg,var(--green),#2dbd98); color:#fff; padding:18px 20px; display:flex;align-items:center;gap:18px; justify-content:space-between; flex-wrap:wrap;}
  header h1{margin:0;font-size:20px;letter-spacing:0.2px}
  nav a{color:#fff;text-decoration:none;margin-left:12px;font-weight:600}
  .container{max-width:1100px;margin:28px auto;padding:0 18px}
  .grid{display:grid;grid-template-columns:1fr 360px;gap:20px}
  @media(max-width:920px){.grid{grid-template-columns:1fr}}
  .card{background:var(--card);border-radius:12px;padding:18px;box-shadow:0 6px 18px rgba(16,24,40,0.06);transition:transform .18s ease}
  .card:hover{transform:translateY(-4px)}
  .section-title{display:flex;align-items:center;gap:12px;margin-bottom:12px}
  .section-title h2{margin:0;color:var(--accent);font-size:18px}
  .meta{color:var(--muted);font-size:13px}
  .pill{display:inline-block;background:rgba(40,180,133,0.12);color:var(--green-dark);padding:6px 10px;border-radius:999px;font-weight:600;font-size:13px;margin-right:8px}
  .topics{display:flex;flex-wrap:wrap;gap:8px;margin-top:12px}
  .topic{background:#f0f9f7;padding:8px 10px;border-radius:8px;font-size:13px;color:#064;box-shadow:inset 0 -1px 0 rgba(0,0,0,0.02)}
  .video-wrap{display:flex;justify-content:center}
  iframe{width:100%;height:360px;border-radius:8px;border:0}
  @media(max-width:560px){ iframe{height:220px} }

  /* Quiz */
  .quiz-list{margin-top:10px}
  .question{margin-bottom:14px;padding:12px;border-radius:8px;background:linear-gradient(180deg,#ffffff,#fbfcfd);border:1px solid #eef2f7}
  .question p{margin:0 0 8px 0;font-weight:600}
  label{display:block;cursor:pointer;padding:6px;border-radius:6px;margin:4px 0}
  input[type=radio]{margin-right:8px}
  .controls{display:flex;gap:10px;align-items:center;margin-top:14px}
  .btn{background:var(--green);color:#fff;padding:10px 14px;border-radius:8px;border:0;cursor:pointer;font-weight:700}
  .btn.secondary{background:#fff;color:var(--green);border:1px solid rgba(40,180,133,0.18)}
  .progress{height:10px;background:#e6eef0;border-radius:999px;overflow:hidden;margin-top:10px}
  .progress > i{display:block;height:100%;background:linear-gradient(90deg,var(--green),#2dbd98);width:0%;transition:width .6s ease}

  /* sidebar */
  .sidebar .card{position:sticky;top:22px}
  .stat{display:flex;gap:12px;align-items:center}
  .stat b{font-size:22px}
  .locked{display:flex;align-items:center;gap:10px;color:#a01;padding:12px;border-radius:8px;background:#fff5f5;border:1px solid #ffe1e1;margin-top:12px}
  small.note{display:block;color:var(--muted);margin-top:8px}

  footer{max-width:1100px;margin:26px auto 60px;padding:0 18px;color:var(--muted);font-size:13px}
</style>
</head>
<body>

<header>
  <div style="display:flex;align-items:center;gap:12px">
    <svg width="36" height="36" viewBox="0 0 24 24" fill="none"><rect width="24" height="24" rx="6" fill="#0b6"/><path d="M7 13l3 3 7-9" stroke="#fff" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"/></svg>
    <h1>E-Learn — DevOps Intermediate</h1>
  </div>
  <nav>
    <a href="DEVOPS index.html">Home</a>
    <a href="devops-beginner.html">Beginner</a>
    <a href="devops-advanced.html" id="advancedLink">Advanced</a>
    <a href="login.html">Login</a>
  </nav>
</header>

<main class="container">
  <div class="grid">
    <!-- Left column -->
    <div>
      <div class="card">
        <div class="section-title"><h2>Intermediate Topics — DevOps</h2><span class="meta">Deeper concepts & hands-on</span></div>

        <div style="display:flex;gap:12px;align-items:center;margin-bottom:12px">
          <span class="pill">Intermediate</span>
          <div class="meta">Estimated time: 6–8 hours • 25-question quiz</div>
        </div>

        <h3 style="margin-top:6px">What you'll learn</h3>
        <ul>
          <li>Advanced CI/CD patterns and branching strategies</li>
          <li>Docker Compose & multi-stage builds</li>
          <li>Kubernetes core concepts: Pods, Deployments, Services</li>
          <li>IaC with Terraform — state & modules</li>
          <li>Monitoring basics with Prometheus & Grafana</li>
          <li>Secrets management and basic DevSecOps concepts</li>
        </ul>

        <div class="topics" aria-hidden>
          <span class="topic">CI/CD pipelines</span>
          <span class="topic">Branching strategies</span>
          <span class="topic">Docker Compose</span>
          <span class="topic">Kubernetes</span>
          <span class="topic">Terraform</span>
          <span class="topic">Monitoring</span>
        </div>

        <h3 style="margin-top:14px">Intro Video</h3>
        <div class="video-wrap card" style="padding:12px">
          <!-- Use embed URL -->
          <iframe src="https://www.youtube.com/embed/Xrgk023l4lI" title="DevOps Intermediate"></iframe>
        </div>

        <h3 style="margin-top:16px">Quick practical checklist</h3>
        <ol>
          <li>Setup Git repo & branching policy (feature/main)</li>
          <li>Create CI pipeline (build → test → artifact)</li>
          <li>Dockerize the app and create a multi-stage Dockerfile</li>
          <li>Deploy to a local Kubernetes cluster (minikube/kind)</li>
          <li>Add basic monitoring & alert rule</li>
        </ol>

      </div>

      <!-- Quiz -->
      <div class="card" style="margin-top:18px">
        <div class="section-title"><h2>Intermediate Quiz (25 Questions)</h2><div class="meta">Pass = 70%</div></div>

        <div id="quizArea" class="quiz-list">
          <!-- Questions will be injected here for readability -->
        </div>

        <div class="controls">
          <button class="btn" id="submitBtn">Submit Quiz</button>
          <button class="btn secondary" id="resetBtn">Reset Answers</button>
        </div>

        <div style="margin-top:12px">
          <div class="progress" aria-hidden><i id="progressBar"></i></div>
          <small class="note">Progress saved in localStorage (if logged in)</small>
        </div>

      </div>
    </div>

    <!-- Right column -->
    <aside class="sidebar">
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center">
          <div>
            <div class="meta">Your status</div>
            <div class="stat"><b id="statusPercent">0%</b><span class="meta">quiz progress</span></div>
          </div>
          <div style="text-align:right">
            <div class="meta">Level</div>
            <div><span class="pill">Intermediate</span></div>
          </div>
        </div>

        <hr style="margin:12px 0;border:none;border-top:1px solid #f0f4f6">

        <div>
          <div class="meta">Prerequisite</div>
          <div style="margin-top:8px">Complete Beginner level or basic Git & Docker experience.</div>
        </div>

        <div id="lockedNotice" class="locked" style="display:none;margin-top:14px">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none"><rect width="24" height="24" rx="4" fill="#ffeef0"/><path d="M7.5 10v-2a4.5 4.5 0 019 0v2" stroke="#d0455b" stroke-width="1.4" stroke-linecap="round"/><rect x="6" y="10" width="12" height="8" rx="2" stroke="#d0455b" stroke-width="1.4"/></svg>
          <div>
            <strong>Advanced locked</strong>
            <div style="font-size:13px;color:#8a1e2b">Pass this intermediate quiz to unlock Advanced.</div>
          </div>
        </div>

      </div>
    </aside>
  </div>
</main>

<footer>© E-Learn • DevOps Intermediate — Built for learning</footer>

<script>
/* ---------- Quiz data (25 Qs) ---------- 
   Each item: {q: "question", choices: [..], answer: "A"}
   You can edit content and answers here.
*/
const quizData = [
  {q:"1. What is a multi-stage Docker build used for?", choices:["Faster network","Smaller final image","More logs","Auto-scaling"], answer:"B"},
  {q:"2. Which kubernetes object updates replicas of pods?", choices:["Service","Deployment","ConfigMap","Secret"], answer:"B"},
  {q:"3. Terraform 'plan' shows:", choices:["Actual deployment","Planned changes","Live metrics","Rollback steps"], answer:"B"},
  {q:"4. What is Canary deployment?", choices:["Complete rolling update","Small subset release for testing","Backup system","Database migration"], answer:"B"},
  {q:"5. 'Blue/Green' strategy aims to:", choices:["Double servers","Zero-downtime releases","Faster builds","More logs"], answer:"B"},
  {q:"6. Which tool scrapes metrics and stores them as time series?", choices:["Grafana","Prometheus","Jenkins","Docker"], answer:"B"},
  {q:"7. Which file holds Kubernetes object definition?", choices:["Dockerfile","manifest.yaml","build.gradle","pom.xml"], answer:"B"},
  {q:"8. What does 'CI' test usually run?", choices:["Unit & integration tests","Only UI tests","Only manual tests","Only security scans"], answer:"A"},
  {q:"9. A Helm chart is:", choices:["Kubernetes package manager","Deployment tool for Docker","Monitoring agent","VCS client"], answer:"A"},
  {q:"10. Which is NOT IaC?", choices:["Terraform","Manual SSH configuration","CloudFormation","Ansible"], answer:"B"},
  {q:"11. In Git, 'rebase' is used to:", choices:["Merge with history rewrite","Delete repo","Create tags","Run tests"], answer:"A"},
  {q:"12. Which command shows running containers?", choices:["docker images","docker ps","docker build","docker pull"], answer:"B"},
  {q:"13. kube-apiserver is responsible for:", choices:["Container runtime","Exposing Kubernetes API","Logging only","Monitoring only"], answer:"B"},
  {q:"14. A rolling update means:", choices:["Replace instances gradually","Replace all at once","Delete cluster","Stop monitoring"], answer:"A"},
  {q:"15. Secret management is important because:", choices:["Improves logs","Protects credentials","Speeds builds","Reduces storage"], answer:"B"},
  {q:"16. Which CI job should run fastest?", choices:["E2E tests","Unit tests","Full integration tests","Manual QA"], answer:"B"},
  {q:"17. Docker Compose is best for:", choices:["Local multi-container dev","Kubernetes production","Monitoring","Version control"], answer:"A"},
  {q:"18. 'Immutable infrastructure' means:", choices:["Change servers live","Replace rather than modify","Store data in-place","No updates allowed"], answer:"B"},
  {q:"19. Which protocol is commonly used by Prometheus to scrape metrics?", choices:["HTTP","FTP","SSH","SMTP"], answer:"A"},
  {q:"20. Which practice integrates security early in pipeline?", choices:["DevSecOps","DevOps only","OpsSec","SecOps later"], answer:"A"},
  {q:"21. What does 'liveness probe' do?", choices:["Checks app is alive & restarts if not","Measures latency","Runs security scan","Backs up data"], answer:"A"},
  {q:"22. Which is a Git branching strategy?", choices:["Trunk-based","Single-commit","Repo-solo","Manual"], answer:"A"},
  {q:"23. Which component schedules pods to nodes?", choices:["kube-scheduler","kubelet","kube-proxy","etcd"], answer:"A"},
  {q:"24. What is 'state' in Terraform?", choices:["Current infra snapshot","Log files","Docker image","K8s pod count"], answer:"A"},
  {q:"25. Which metric is key for alerting high load?", choices:["CPU usage","Source code size","Number of branches","Time zone"], answer:"A"}
];

const quizArea = document.getElementById('quizArea');
const statusPercent = document.getElementById('statusPercent');
const progressBar = document.getElementById('progressBar');
const submitBtn = document.getElementById('submitBtn');
const resetBtn = document.getElementById('resetBtn');
const advancedLink = document.getElementById('advancedLink');
const lockedNotice = document.getElementById('lockedNotice');

function buildQuiz(){
  quizArea.innerHTML = '';
  quizData.forEach((item,i)=>{
    const id = 'q'+(i+1);
    const div = document.createElement('div'); div.className='question';
    const p = document.createElement('p'); p.textContent = `${i+1}. ${item.q.replace(/^\d+\.\s*/,'')}`;
    div.appendChild(p);
    item.choices.forEach((c,ci)=>{
      const val = String.fromCharCode(65+ci);
      const label = document.createElement('label');
      label.innerHTML = `<input type="radio" name="${id}" value="${val}"> ${c}`;
      div.appendChild(label);
    });
    quizArea.appendChild(div);
  });
}
buildQuiz();

/* Load saved progress if user present */
function loadProgress(){
  const user = localStorage.getItem('loggedInUser');
  if(!user){ statusPercent.textContent='Not logged'; return; }
  const key = `${user}_devops_intermediate_progress`;
  const stored = localStorage.getItem(key);
  const pct = stored ? parseInt(stored,10) : 0;
  statusPercent.textContent = pct + '%';
  progressBar.style.width = pct + '%';
  // lock advanced if <70
  if(pct < 70){
    lockedNotice.style.display = 'flex';
  } else {
    lockedNotice.style.display = 'none';
  }
}
loadProgress();

/* Submit logic */
submitBtn.addEventListener('click', ()=>{
  let score=0;
  quizData.forEach((_,i)=>{
    const name = 'q'+(i+1);
    const sel = document.querySelector(`input[name=${name}]:checked`);
    if(sel && sel.value === quizData[i].answer) score++;
  });
  const percent = Math.round((score/quizData.length)*100);
  alert(`You scored ${percent}% (${score}/${quizData.length})`);
  progressBar.style.width = percent+'%';
  statusPercent.textContent = percent + '%';

  const user = localStorage.getItem('loggedInUser');
  if(user){
    const key = `${user}_devops_intermediate_progress`;
    localStorage.setItem(key, percent);
    if(percent >= 70){
      alert('Great — you passed! Advanced will be unlocked.');
      lockedNotice.style.display = 'none';
    }
  } else {
    alert('Sign in to save progress (set localStorage "loggedInUser").');
  }
});

/* Reset answers */
resetBtn.addEventListener('click', ()=>{
  document.querySelectorAll('#quizArea input[type="radio"]').forEach(i=>i.checked=false);
});

/* If user tries to open advanced link ensure progress ok (simple UX protection) */
advancedLink.addEventListener('click', (e)=>{
  const user = localStorage.getItem('loggedInUser');
  const key = user ? `${user}_devops_intermediate_progress` : null;
  const pct = key ? parseInt(localStorage.getItem(key) || '0',10) : 0;
  if(pct < 70){
    e.preventDefault();
    alert('You must score at least 70% on Intermediate to open the Advanced page.');
  }
});
</script>
</body>
</html>
